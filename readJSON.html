<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script src="./lib/d3/d3.js" charset="utf-8"></script>
        <script src="./lib/topojson.js" charset="utf-8"></script>
    </head>
<body>
<script type="text/javascript">



    var color = d3.scaleLinear()
    .domain([500, 14000])
    .range([255,0]);
var width = 800;
var height = 800;
var populationHash = {};

// d3.csv("./Japan2015Data.csv").then(function(data){
//     data.forEach(function(d)
//     {
//         populationHash[d.Prefecture] = d.Population;
//     });
//     showMap();
// });
// function showMap(){
let dataset;
d3.json("./in03.json").then(function(data){
    //console.log(data);
    let TimeTable = data.Linelist[0]["Weekday"]["HourTable"];
    console.log(TimeTable);
    showGraph(TimeTable);
});
function showGraph(TimeTable){
    var table_size = TimeTable.lengh;
    var svg = d3.select("body").append("svg")
    .attr("width", 2000)
    .attr("height", 1000);

    var bar = svg.selectAll("rect")
    .data(TimeTable)
    .enter()
    .append("rect");
    //let hour = TimeTable[0].Hour;
    //let num = TimeTable[0].number;
    console.log(bar);
    bar.attr("x", function(d, i) { return i * 40 + 20; })
    //.attr("y", 400)
    //.attr("height", 0)
    .attr("width", 20)

    //d3.selectAll("rect")
    //.transition()
    //.duration(1500)
    //.ease(d3.easePolyIn)
    .attr("y", function(d,i) { return 200 - d.number * 5; })
    .attr("height", function(d,i) { return d.number * 5;})
    .attr("fill","green");
    
    var text = svg.selectAll("text")
    .data(TimeTable)
    .enter()
    .append("text");

    var graph_text = text.text(function(d,i) { return d.Hour;})
    .attr("x", function(d, i) { return (i*40) + 25;})
    .attr("y", 220);
}

</script>
</body></html>
